---
slug: '2020-11-29-what-is-amd-cjs-esm-umd-javascript'
title: 'Vocabul√°rio do dev: O que √© AMD, CMJ, ESM e UMD no JavaScript üì¶'
date: '2020-11-29'
author: 'Ra√≠ Siqueira'
published: true
description: 'O que s√£o estas siglas e o que o dev JavaScript precisa entender sobre.'
categories:
  - 'javascript'
  - 'modules'
  - 'tree shaking'
banner: './images/toby-stodart-packages.jpeg'
bannerCredit: 'Toby Stodart @ Unsplash'
---

J√° pensou em escrever um c√≥digo JavaScript nos dias de hoje sem usar as sintaxes
_import/export_? Seria estranho, certo? Estamos acostumados a usar m√≥dulos no JavaScript,
mas em alguns momentos nos deparamos com as seguintes siglas: **AMD**, **CMJ**, **ESM**
ou **UMD**.

![Exemplo na documenta√ß√£o do React](./images/example-react-docs.png)

Sem mais delongas vamos ao que interessa, o que cada sigla dessas significa.

## Asynchronous Module Definition ‚Äî AMD

Come√ßando com o **AMD**, que √© uma sigla para Asynchronous Module Definition, e √© um padr√£o que foi proposto
para ser usado para aplica√ß√µes frontend (enquanto o CJS ‚Äî citado no pr√≥ximo t√≥pico,
√© usado para c√≥digos NodeJS). Segue um exemplo de c√≥digo AMD:

```js
define(['dependecy01', ' dependency02'], function (dependecy01, dependecy02) {
  return function () {}
})
```

**Alguns detalhes do AMD:**

- M√≥dulos AMD s√£o importados de forma ass√≠ncrona;
- A sintaxe do AMD √© menos intuitiva do que as demais (por exemplo o CJS);
- implementado pelo RequireJS;

**Mais informa√ß√µes sobre AMD**: _[Why AMD?](https://requirejs.org/docs/whyamd.html)_

## CommonJS ‚Äî CJS

CJS √© uma abrevia√ß√£o para CommonJS, um padr√£o usado no NodeJS. Em algum momento
j√° deve ter visto um trecho de c√≥digo com a seguinte sintaxe:

```js
module.exports = function commonJsModule() {
  console.log('hello CJS!')
}

const commonJsModule = require('./cjsModule')
```

**Alguns detalhes sobre o CJS:**

- Imports do CommonJS s√£o de forma s√≠ncrona;
- CommonJS n√£o funciona no browser, temos que fazer um transpile para ter suporte;
- Quando importamos um m√≥dulo CJS, n√≥s teremos uma c√≥pia do objeto que foi importado;
- N√£o tem suporte a [tree shaking](/blog/2020-05-17-what-is-tree-shaking);

## ECMAScript Modules ‚Äî ESM

ESM ou ES Modules trazem um padr√£o para o sistema de m√≥dulos do JavaScript e j√°
√© suportado nas vers√µes mais modernas dos atuais browsers. Provavelmente voc√™ j√°
se deparou com esta sintaxe:

```js
import {Component, Input } from '@angular/core';
.....

export const myValue = 123;
.....

export default function() {
  console.log('hey ESM');
}
```

A vantagem de termos um padr√£o √© que a maioria das libs podem seguir este padr√£o
e aproveitar de suas vantagens, por exemplo o Rollup remover c√≥digo desnecess√°rio.

**Alguns detalhes sobre o ESM:**

- Suporte a [tree shaking](/blog/2020-05-17-what-is-tree-shaking)
- Sintaxe simples;
- Suporte nativo nos mais modernos navegadores;
- Pode ser usado direto no HTML:

```html
<script type="module">
  import React from 'react';

  React.createElement(....);
</script>
```

## Universal Module Definition ‚Äî UMD

UMD √© um padr√£o para o Universal Module Definition, e √© um padr√£o capaz de funcionar
tanto no client-side quanto no server-side. A sintaxe n√£o √© das mais amig√°veis,
mas une o melhor dos mundos do CJS e do AMD:

```js
(function (root, factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], factory);
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        root.Requester = factory(root.$, root._);
    }
}(this, function ($, _) {
    // this is where I defined my module implementation

    var Requester = { // ... };

    return Requester;
}));
```

**Alguns detalhes sobre o UMD:**

- √â uma combina√ß√£o do CJS e do AMD;
- Funciona em ambos ambientes, front e back (da√≠ o nome Universal);
- O UMD √© usado como um fallback quando o build √© feito pelo Webpack ou Rollup, por exemplo;

## Resum√£o

**AMD** √© uma boa alternativa quando pensamos em m√≥dulos no frontend, al√©m de ser
ass√≠ncrono;

**CJS** √© usado no server side, tem uma sintaxe simples (usando require), n√£o √© poss√≠vel
usar carregamento em runtime de m√≥dulos;

**ESM** √© o melhor padr√£o devido a sua simplicidade, tem suporte a [tree shaking](/blog/2020-05-17-what-is-tree-shaking) e
uma sintaxe simples;

**UMD** √© uma boa alternativa como fallback quando estamos usando ESM, pode ser usado
em ambos ambientes, AMD ou CJS, m√≥dulos UMD tem a capacidade de funcionar tanto no
client quando no server side.

Era isso, um bom resumo do que s√£o essas siglas que vemos quando estamos trabalhando
com JavaScript ou em bibliotecas JS. Em breve mais um artigo da s√©rie Vocabul√°rio do dev.
At√© a pr√≥xima ü§ô.

## Refer√™ncias:

- https://requirejs.org/docs/whyamd.html
- https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules
- https://nodejs.org/docs/latest/api/modules.html
